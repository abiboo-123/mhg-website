---
import { links } from '../../data/links';
import Layout from '../../layouts/BaseLayout.astro';
const lang = 'ar';
---

<Layout title="Contact – MHG Ingolstadt e. V." lang={lang}>
  <section class="max-w-6xl mx-auto px-4 py-12">
    <h2 class="text-3xl sm:text-4xl font-bold mb-10 text-center">👋 Join Our Community!</h2>

    <!-- Info Cards -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-10">
      <div class="bg-white rounded-xl shadow-md p-6">
        <h3 class="text-xl font-semibold mb-3">📚 For Students</h3>
        <p class="mb-2">Connect with us:</p>
        <ul class="space-y-1 text-sm">
          <li>Email: <a href=`mailto:${links.email}` class="text-[#0369a1] underline" target="_blank">mhg@thi.de</a></li>
          <li>WhatsApp: <a href={links.whatsapp} class="text-[#0369a1] underline" target="_blank">Join our group</a></li>
          <li>Instagram: <a href={links.instagram} class="text-[#0369a1] underline" target="_blank">@mhg_ingolstadt</a></li>
        </ul>
      </div>

      <div class="bg-white rounded-xl shadow-md p-6">
        <h3 class="text-xl font-semibold mb-3">🕌 For Guest Speakers/Sheikhs</h3>
        <p>We welcome you to offer lectures or sessions. Please get in touch for collaboration opportunities.</p>
      </div>
    </div>

    <!-- Contact Form -->
    <div class="bg-white rounded-xl shadow-md p-6">
      <h3 class="text-xl font-semibold mb-6">📧 Get in Touch!</h3>
      <form
        action="https://formspree.io/f/mnnvjege"
        method="POST"
        class="space-y-4"
        id="contactForm"
      >
        <div>
          <label for="name" class="block text-sm font-medium mb-1">Name</label>
          <input
            type="text"
            id="name"
            name="name"
            required
            class="w-full border border-gray-300 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0369a1]"
          />
        </div>

        <div>
          <label for="email" class="block text-sm font-medium mb-1">Email</label>
          <input
            type="email"
            id="email"
            name="email"
            required
            class="w-full border border-gray-300 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0369a1]"
          />
        </div>

        <div>
          <label for="message" class="block text-sm font-medium mb-1">Message</label>
          <textarea
            id="message"
            name="message"
            rows="4"
            required
            class="w-full border border-gray-300 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-[#0369a1]"
          ></textarea>
        </div>

        <button
          type="submit"
          class="w-full bg-[#0369a1] text-white py-2 rounded-full hover:bg-blue-800 transition"
        >
          Send Message
        </button>
      </form>
    </div>
  </section>

  <!-- ✅ Feedback message handling -->
  <script is:inline>
    const form = document.getElementById('contactForm');
  
    form.addEventListener('submit', async function (e) {
      e.preventDefault();
      const formData = new FormData(form);
      const response = await fetch(form.action, {
        method: form.method,
        body: formData,
        headers: { Accept: 'application/json' }
      });
  
      // Clear previous messages
      document.querySelectorAll('[data-feedback]').forEach(el => el.remove());
  
      const msg = document.createElement('div');
      msg.setAttribute('data-feedback', '');
      msg.className = 'mt-4 p-3 rounded-md text-sm';
  
      if (response.ok) {
        msg.classList.add('bg-green-100', 'text-green-800', 'border', 'border-green-300');
        msg.textContent = '✅ Thank you! Your message has been sent.';
        form.reset();
      } else {
        msg.classList.add('bg-red-100', 'text-red-800', 'border', 'border-red-300');
        msg.textContent = '❌ Something went wrong. Please try again later.';
      }
  
      form.insertAdjacentElement('afterend', msg);
  
      // Auto-hide after 5 seconds
      setTimeout(() => {
        msg.remove();
      }, 5000);
    });
  </script>
  
</Layout>
